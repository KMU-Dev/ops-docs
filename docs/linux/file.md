---
sidebar_position: 4
---

# 檔案管理

在 Linux 的系統下，總是會需要用到檔案管理的情況發生，包括建立目錄與檔案、複製與移動檔案、刪除檔案與目錄等等。 另外，讀者也應該要知道在 Linux 的系統下，那些目錄是正規系統會存在的，以及該目錄又應該要放置哪些資料等等。

## 工作目錄切換

### `cd` 切換工作目錄

```bash
cd [dir]
```

| 目錄名稱 | 目錄意義 |
| -------- | -------- |
| /	 | 根目錄，從根目錄寫起的檔名只會存在一個 |
| ~	 | 使用者的家目錄，不同用戶的家目錄均不相同 |
| .	 | 一個小數點，代表的是『本目錄』，亦即目前的工作目錄之意 |
| .. | 	兩個小數點，代表的是『上一層目錄』 |
| -	 | 一個減號，代表『上一次的工作目錄』之意 |

操作者應該要注意，根據檔名寫法的不同，也可將所謂的路徑(path)定義為絕對路徑(absolute)與相對路徑(relative)。 這兩種檔名/路徑的寫法依據是這樣的：

- **絕對路徑**：由根目錄(/)開始寫起的檔名或目錄名稱， 例如 /home/student/.bashrc；
- **相對路徑**：相對於目前路徑的檔名寫法。 例如 ./home/student 或 ../../home/student/ 等等。開頭不是 / 就屬於相對路徑的寫法

### `pwd` 顯示目前工作目錄

## Linux 目錄樹系統簡介

所有的 Linux distribions 理論上都應該要遵循當初 Linux 開發時所規範的各項標準，其中之一就是檔案系統的階層標準 (Filesystem Hierarchy Standard, FHS)。

| 目錄名稱 | 應放置檔案內容 |
|---------|--------------------------------|
| /bin<br />/sbin | /bin 主要放置一般用戶可操作的指令<br />/sbin 主要放置系統管理員可操作的指令<br />這兩個資料目前都是連結檔，分別連結到 /usr/bin, /usr/sbin 當中|
| /boot | 與開機有關的檔案，包括核心檔案 / 開機管理程式與設定檔 |
| /dev | 是 device 的縮寫，放置裝置檔，包括硬碟檔、鍵盤滑鼠終端機檔案等 |
| /etc | 一堆系統設定檔，包括帳號、密碼與各式服務軟體的設定檔大多在此目錄內 |
| /home<br />/root | /home 是一般帳號的家目錄預設放置位置<br />/root 則是系統管理員的家目錄了！ |
| /lib<br />/lib64 | 系統函式庫與核心函式庫，其中 /lib 包含核心驅動程式，而其他軟體的函式庫若為 64 位元，則使用 /lib64 目錄內的函式庫檔案。 這兩個目錄目前也都是連結到 /usr/lib, /usr/lib64 內。
| /proc | 將記憶體內的資料做成檔案類型，放置於這個目錄下，連同某些核心參數也能手動調整 |
| /sys | 跟 /proc 類似，只是比較針對硬體相關的參數方面。 |
| /usr | 是 usr 不是 user 喔！是 unix software resource 的縮寫，與 Unix 程式有關。從 CentOS 7 開始， 系統相關的所有軟| 體、服務等，均放置在這個目錄中了！因此不能與根目錄分離。|
| /var | 是一些變動資料，系統運作過程中的服務資料、暫存資料、登錄資料等等。|
| /tmp | 一些使用者操作過程中會啟用的暫存檔，例如 X 軟體相關的資料等等。|
| /media<br />/mnt | /media 主要是系統上臨時掛載使用的裝置(如隨插即用 USB)之慣用目錄<br />/mnt 主要是使用者或管理員自行暫時手動掛載的目錄 |
| /opt | /opt 是 optional 的意思，通常是第三方協力廠商所開發的軟體放置處 |
| /run | 系統進行服務軟體運作管理的功能，CentOS 7以後，這個目錄也放在記憶體當中了！ |
| /srv | 通常是給各類服務 (service) 放置資料使用的目錄 |

## 檔案管理

### `touch` 建立檔案

```bash
touch test
```

### `mkdir` 建立目錄

```bash
mkdir backup
cd backup
```

### `ls` 進階使用

```bash
ls -a
```

```bash
ls -l
```

```bash
ls -h
```

### `cp` 複製檔案及目錄

`-r` 複製目錄
`-a` 複製權限以及元資料

```bash
cp -r /etc .
```

### `mv` 重新命名、移動檔案

### `rm` 刪除資料夾

`-r` 刪除目錄

```bash
cd
rm -r backup
```

## 檔案內容查詢

很多時候管理員只是需要知道檔案內容，並沒有進行編輯。此時可以透過一些簡易的指令來查詢文件檔案的內容。

### 連續輸出檔案內容

- cat：將檔案內容全部列出
- head：預設只列出檔案最前面 10 行
- tail：預設只列出檔案最後面 10 行

### 檢索檔案內容

上述的 cat/head/tail 需要查詢資料時，得要人工眼力查詢，因此，如果資料量比較大，而且需要查詢資訊時，可以透過 more 與 less 來處置。 more 預設會一頁一頁向後翻動，而 less 則可以向前、向後翻頁，事實上， man page 就是呼叫 less 指令的函數處理的方式。

**more** 軟體內常用指令：

- /關鍵字：可以查詢關鍵字
- 空白鍵：可以向下/向後翻頁
- q：結束離開不再查詢文件

**less** 軟體內常用指令：

- /關鍵字：可以查詢關鍵字
- 空白鍵：可以向下/向後翻頁
- [pageup]：可以向前/向上翻頁
- [pagedown]：可以向下/向後翻頁
- g：直接來到第一行
- G：直接來到最後一行
- q：結束離開不再查詢文件

## vim 程式編輯器

管理員總是會需要變動系統設定檔，或者是進行純文字檔的編輯，此時就需要 vi/vim 的支援。因為 vi/vim 是 Linux 很多指令預設會去呼叫的編輯程式， 因此管理員『務必』要學會這個編輯器。另外， vim 會有顏色的支援， vi 僅為文書編輯器，故我們建議讀者們，應該要熟悉 vim 較佳。

### 常用的 vim 一般指令模式與指令列模式列表

| 慣用的指令 | 說明 |
| ---------- | --- |
|i, [esc] |	i 為進入編輯模式， [esc] 為離開編輯模式 |
|G	| 移動到這個檔案的最後一列 |
|gg	| 移動到這個檔案的第一列 |
|nG	| n 為數字，移動到這個檔案的第 n 列，例如 10G 為讓游標去到第 10 列 |
|dd	| dd 為刪除游標所在行，5dd 為刪除 5 行，ndd 為刪除 n 行 |
|yy	| yy 為複製游標所在行，5yy 為複製 5 行，nyy 為複製 n 行 |
|p	| 在游標底下貼上剛剛刪除/複製的資料 |
|u	| 復原前一個動作 |
|:w	| 將目前的資料寫入硬碟中 |
|:q	| 離開 vim |
|:q!| 	不儲存 (強制) 離開 vim |